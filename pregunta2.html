<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pregunta 2</title>
<style>
    body {font-family: Arial, sans-serif; background: #e7f3ff; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh;}
    .container {background: white; padding: 35px; border-radius: 15px; width: 90%; max-width: 650px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center;}
    #error {color: red; font-weight: bold; margin-bottom: 10px; display: none;}
    #msg {color: #333; margin-top:10px; font-size:14px}
    input {width: 80%; padding: 10px; font-size: 16px; border-radius: 6px; border: 1px solid #999; margin-top: 20px;}
    button {margin-top: 12px; padding: 10px 18px; font-size: 16px; border: none; background: #4CAF50; color: white; border-radius: 8px; cursor: pointer;}
    button:hover {background: #45a049;}
    .controls {display:flex; gap:8px; justify-content:center; margin-top:12px}
    a {color: #0077cc; text-decoration:none}
</style>
</head>
<body>
<div class="container">
    <div id="error">Incorrecta.</div>
    <h2>Observa las llaves y sigue la que tiene la opción correcta.<br>¿De qué color es la llave correcta?</h2>

    <!-- Video: intenta ruta relativa y (si el usuario la completa) un raw.githubusercontent URL como fallback -->
    <video id="video" width="100%" controls>
        <source id="src1" src="carlitos/videolimbo.mp4" type="video/mp4">
        <!-- Si necesitás usar un enlace crudo de GitHub, reemplazá USER, REPO, BRANCH abajo y descomentá la línea -->
        <!-- <source id="src2" src="https://raw.githubusercontent.com/USER/REPO/BRANCH/carlitos/videolimbo.mp4" type="video/mp4"> -->
        Tu navegador no soporta video.
    </video>

    <div class="controls">
        <button id="reiniciar">Reiniciar video</button>
        <button id="abrir">Abrir video en nueva pestaña</button>
    </div>

    <input id="respuesta" type="text" placeholder="escribí tu respuesta aquí... (todo en minúscula)">
    <br>
    <button onclick="verificar()">Responder</button>

    <p id="msg">Esto podría ayudar... <a href="https://caesar-cipher.com/?mode=decrypt" target="_blank">https://caesar-cipher.com/?mode=decrypt</a></p>
    <p style="font-size:13px;color:#666">Sugerencia: si lo subiste a GitHub Pages asegurate de que el archivo esté en la rama que publiqué: normalmente <strong>main</strong> (o <strong>gh-pages</strong> si usás esa opción).</p>
</div>

<script>
    // Guardado56: si el usuario ya pasó esta pregunta o más, mantener
    let guard = localStorage.getItem("guardado56") || "0";
    if (parseInt(guard) > 2) {
        // ya pasó la 2 (ej: está en 3 o más)
        // window.location.href = "pregunta3.html"; // no forzamos aquí
    }

    // Reiniciar video
    const video = document.getElementById('video');
    document.getElementById('reiniciar').addEventListener('click', function(){
        video.currentTime = 0;
        video.play();
    });

    // Abrir en nueva pestaña (para probar directo si hay problemas de ruta)
    document.getElementById('abrir').addEventListener('click', function(){
        // toma la primera fuente disponible
        const src = document.getElementById('src1').getAttribute('src');
        if (!src) {
            alert('No hay ruta de video definida.');
            return;
        }
        window.open(src, '_blank');
    });

    // Comprobación automática básica: si el video falla, mostramos pista
    video.addEventListener('error', function(e){
        console.log('Error cargando video:', e);
        const msg = document.getElementById('msg');
        msg.innerHTML += '<br><strong>ERROR:</strong> el video no se pudo cargar. Posibles causas: ruta incorrecta, archivo no publicado en GitHub Pages, o nombre con mayúsculas/espacios. Revisa la consola de red (F12 → Network) para ver si aparece 404.';
    });

    function verificar() {
        let r = document.getElementById("respuesta").value.trim().toLowerCase();
        if (r === "celeste") {
            localStorage.setItem("guardado56", "3");
            window.location.href = "pregunta3.html";
        } else {
            document.getElementById("error").style.display = "block";
        }
    }
</script>
</body>
</html>
